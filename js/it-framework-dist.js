"use strict";function empty(t){return!t}function makeid(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function createObject(t){var e=null;switch(t.xtype){case"button":e=new Button(t);break;case"menu":e=new Menu(t);break;case"toolbar":e=new ToolBar(t);break;case"editor":e=new Editor(t);break;case"combobox":e=new ComboBox(t);break;case"form":e=new Form(t);break;case"textbox":e=new TextBox(t);break;case"checkbox":e=new CheckBox(t);break;case"imagebox":e=new ImageBox(t);break;case"html":e=new HTML(t);break;case"column":e=new Column(t);break;case"flexbox":e=new FlexBox(t);break;default:e=null,console.warn(t.xtype+" is not registered.")}return e}function Event(a){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this;this.events={},this.add=function(t,e){"function"==typeof e&&(this.events[t]=e)},this.getEvents=function(){return this.events},o.fire=function(t,e,n){n=n||a;o.events.hasOwnProperty(t)&&"function"==typeof o.events[t]&&o.events[t].apply(n,e),i.hasOwnProperty(t)&&"function"==typeof i[t]&&i[t].apply(n,e)},this.set=function(a){var i=this,o={};return $.each(["blur","change","click","dblclick","focus","hover","keydown","keypress","keyup","show","hide"],function(t,e){var n="on"+e.substring(0,1).toUpperCase()+e.substring(1,e.length).toLowerCase();o[n]=function(t){i.add(n,t)},o[e]=function(){a.trigger(e)},a.on(e,function(t){i.fire(n,[t.currentTarget,t]),i.fire(e,[t.currentTarget,t])})}),o}}function DataTable(t){var r=this,c=$.extend({id:"",width:"",height:"",typeTable:"",fixHeader:!1,wrap:!1,store:{type:"json",params:{start:0,limit:20}},css:{},cssInjectRow:{},cssInjectCell:{},columns:[]},t),l=this,e=""==c.id?makeid():c.id,u=$('\n\t\t<div class="it-grid">\n\t\t\t<div class="it-grid-container">\n\t\t\t\t<div class="it-grid-header-fix"></div>\n\t\t\t\t<div class="it-grid-wrapper">\n\t\t\t\t\t<table border="1" width="100%">\n\t\t\t\t\t\t<thead></thead>\n\t\t\t\t\t\t<tbody></tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<nav class="it-grid-pagination">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li> <a href="javascript:void(0)" rel="first"><i class="fa fa-caret-left"></i></a></li>\n\t\t\t\t\t\t<li> <a href="javascript:void(0)" rel="back"><i class="fa fa-angle-left"></i></a></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<input type="text" class="pagination-current" value="1"> \n\t\t\t\t\t\t\t<span style="padding: 0 5px;">/</span>\n\t\t\t\t\t\t\t<span class="pagination-page-count"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li> <a href="javascript:void(0)" rel="next"><i class="fa fa-angle-right"></i></a></li>\n\t\t\t\t\t\t<li> <a href="javascript:void(0)" rel="last"><i class="fa fa-caret-right"></i></a></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tMenampilkan \n\t\t\t\t\t\t\t<span class="pagination-show"></span> dari \n\t\t\t\t\t\t\t<span class="pagination-count"></span> Data\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</nav>\n\t\t\t</div>\n\t\t</div>\n\t');return u.attr("id",e),u.find(".it-grid-container").addClass(c.typeTable),c.width&&u.width(c.width),c.height&&u.height(c.height),$.isEmptyObject(c.css)||u.css(c.css),this.events=new Event(l,c),this.onItemClick=function(t){return r.events.add("onItemClick",t)},this.onItemDblClick=function(t){return r.events.add("onItemDblClick",t)},this.data=null,this.page=1,this.pageCount=1,this.params=c.store.params,this.selectedRecord=null,this.selectedColumn=null,this.hasTdError=!1,this.store=null,"function"==typeof c.store?(this.store=c.store,this.data=this.store.getData()):this.store=new Store(c.store),this.store.onLoad(function(t,e){l.data=t,l.params=e,l.load()}),this.store.onError(function(t){return alert(t.message),!1}),this.load=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(l.data){u.find("tbody").empty();var t=l.data.total_rows,e=l.params.start,n=l.params.limit,a=e+n;l.data.rows.length;a=a<t?a:t;var i=0<t?e+1+"/"+a:"0",o=Math.ceil(t/n);l.pageCount=o,u.find(".pagination-show").html(i),u.find(".pagination-count").html(t),u.find(".pagination-page-count").html(o),$.each(r.data.rows,function(t,e){return r.createRows(e)})}},this.loadPage=function(t){this.data&&(this.page=t,this.store.load({params:{start:(t-1)*l.params.limit,limit:l.params.limit}}),u.find(".pagination-current").val(t))},this.getSelectedRow=function(){return this.selectedRecord},this.getRecord=function(t){return this.data&&this.data.rows[t]?this.data.rows[t]:null},this.getSetting=function(){return c},this.getEditedRecords=function(){return this.store.dataChanged},this.setEditable=function(i){var o=this,t=i.data().editor,r=i.find("div"),e=r.text();if(!i.hasClass("it-grid-editing")&&(i.addClass("it-grid-editing"),t)){var n=void 0!==t.required&&t.required;switch(t.xtype){case"text":if(c.wrap)var s=$("<textarea/>",{class:"it-grid-form-control",val:e,required:n}).height(i.height()-1);else s=$("<input/>",{class:"it-grid-form-control",type:-1<$.inArray(t.type,["file","radio","checkbox","numeric"])?"text":t.type,val:e,required:n});if(r.html(s),null!=t.minlength&&s.attr("minlength",t.min),null!=t.maxlength&&s.attr("maxlength",t.max),"rupiah"==t.type&&s.keyup(function(t){var e=$(this).val().replace(/[^,\d]/g,"").toString().split(","),n=e[0].length%3,a=e[0].substr(0,n),i=e[0].substr(n).match(/\d{3}/gi);i&&(separator=n?".":"",a+=separator+i.join(".")),a=null!=e[1]?a+","+e[1]:a,$(this).val(a)}),"numeric"==t.type){var a=null!=t.min?t.min:"",d=null!=t.max?t.max:"";s.keyup(function(){var t=$(this).val();a&&t<a&&$(this).val(a),d&&d<t&&$(this).val(d)})}"numeric"!=t.type&&"rupiah"!=t.type||s.keypress(function(t){if(8!=t.which&&0!=t.which&&(t.which<48||57<t.which))return!1}),s.blur(function(t){var e=t.target.checkValidity();if(o.hasTdError=!e,e){var n=s.val(),a=l.store.cekData(o.selectedRecord,c.columns[o.selectedColumn].dataIndex,n);r.html(n),i.removeClass("it-grid-editing"),i[a?"addClass":"removeClass"]("it-grid-changed"),t.preventDefault()}else setTimeout(function(){return s.focus()},100)}),s.focus(function(t){return $(t.currentTarget).select()}),s.focus(),s.keyup(),s.keypress(),u.focusout(function(t){o.hasTdError&&setTimeout(function(){return s.focus()},100)})}}},this.createRows=function(s){var d=this,l=$("<tr/>",{css:c.cssInjectRow}).appendTo(u.find("tbody"));$.each(c.columns,function(t,a){var e=$("<div/>",{width:void 0!==a.width?a.width:"",css:{"text-align":void 0!==a.align?a.align:"left"}});e[c.wrap?"addClass":"removeClass"]("wrap");var n=void 0!==s[a.dataIndex]?s[a.dataIndex]:"";if(n&&void 0!==a.editor&&"checkbox"==a.xtype)$("<input/>",{type:"checkbox",name:a.dataIndex+"[]",val:n,checked:n||"Y"==n}).appendTo(e);else if(n&&void 0!==a.image&&a.image){var i=void 0!==a.url?a.url:"";$("<img/>",{src:i+n}).css({height:80,display:"block",margin:"auto"}).appendTo(e)}else{var o=null!=a.data?a.data:null;o&&$.each(o,function(t,e){e.key==n&&(n=e.value)}),e.html(n)}var r=$("<td/>",{valign:void 0!==a.valign?a.valign:"top",align:void 0!==a.align?a.align:"left",width:void 0!==a.width?a.width:"",css:c.cssInjectCell}).data(a);r.click(function(t){if(!d.hasTdError){u.find("tbody tr").removeClass("it-grid-selected"),l.addClass("it-grid-selected"),d.selectedRecord=r.parent("tr").index(),d.selectedColumn=r.index();var e=void 0!==a.editor?a.editor:null,n=void 0!==d.store.storeData.rows[d.selectedRecord].locked&&d.store.storeData.rows[d.selectedRecord].locked;e&&!n&&d.setEditable(r),d.events.fire("onItemClick",[d.getRecord(d.getSelectedRow())])}}),r.dblclick(function(t){d.events.fire("onItemDblClick",[d.getRecord(d.getSelectedRow())])}),r.append(e),r.appendTo(l)})},this.addRow=function(t){var e=this;this.hasTdError||setTimeout(function(){t=$.extend({},t,{new:!0}),e.store.storeData.rows.push(t),e.createRows(t),u.find("tbody tr:last-child td:first-child").click()},100)},this.removeRow=function(t){this.data.rows.splice(t,1);u.find("tbody > tr:eq("+t+")").fadeOut(100,function(){$(this).remove()})},this.setPage=function(t){if(r.data){var e=Math.ceil(r.data.total_rows/r.params.limit);switch(t){case"first":1!=r.page&&r.loadPage(1);break;case"last":r.page!=e&&r.loadPage(e);break;case"next":r.page<e&&r.loadPage(r.page+1);break;case"back":1<r.page&&r.loadPage(r.page-1)}}},this.renderTo=function(t){var n=$("<tr>");void 0!==c.customHeader?n=$(c.customHeader):$.each(c.columns,function(t,e){$("<th/>",{text:e.header,css:{width:e.width}}).appendTo(n)}),u.find("thead").append(n),u.find(".it-grid-pagination")[c.paging?"show":"hide"](),u.find(".it-grid-pagination > ul li > a").click(function(t){if(0<l.store.dataChanged.length&&!l.store.isSaved)var e=MessageBox({type:"tanya",width:"400",title:"Konfirmasi",message:"Data Berubah Belum di Save, Lanjutkan ?",buttons:[{text:"Ya",handler:function(){r.store.dataChanged=[],r.store.isSaved=!0,r.setPage($(t.currentTarget).attr("rel"))}},{text:"Tidak",handler:function(){return e.hide()}}]});else r.setPage($(t.currentTarget).attr("rel"))}),u.find(".it-grid-pagination .pagination-current").keypress(function(t){if(8!=t.which&&0!=t.which&&(t.which<48||57<t.which))return!1;13==t.which&&$(t.currentTarget).val()&&l.loadPage($(t.currentTarget).val())}),u.appendTo(t),t},this.serializeFromHTML=function(){var a=[];return u.find("tbody tr").each(function(t,e){var n={};$(this).find("td").each(function(t,e){c.columns[t].dataIndex&&(n[c.columns[t].dataIndex]=$(this).text())}),a[t]=n}),a},this.getComponent=function(){return u},this}function Grid(t){return console.warn("Grid is depecated. move to DataTable."),new DataTable(t)}function Store(t){var n=$.extend({type:"json",url:"",data:{},params:{start:0,limit:20,orderBy:"",sortBy:""}},t),a=this;a.events=new Event(a,n),a.params={},a.storeData=null,a.dataChanged=[],a.isSaved=!1,a.beforeLoad=function(t){a.events.add("beforeLoad",t)},a.afterLoad=function(t){a.events.add("afterLoad",t)},a.completeLoad=function(t){a.events.add("completeLoad",t)},a.onLoad=function(t){a.events.add("onLoad",t)},a.onError=function(t){a.events.add("onError",t)},a.onChange=function(t){a.events.add("onChange",t)},a.empty=function(){a.dataChanged=[],a.storeData={rows:[],total_rows:0},a.events.fire("onLoad",[a.storeData,a.params])},a.load=function(t){a.events.fire("beforeLoad",[a.storeData]);t=t||{};switch(n.type){case"json":var e=$.extend(n.params,t.params);a.params=e,a.dataChanged=[],$.ajax({type:"POST",url:n.url,data:e,success:function(t){void 0!==t.rows&&void 0!==t.total_rows?(a.storeData=t,a.events.fire("onLoad",[a.storeData,a.params])):(a.storeData={},a.events.fire("onError",[{status:!1,message:"Format Data Tidak Sesuai"}]))},error:function(){a.events.fire("onError",[{status:!1,message:"Data JSON '"+n.url+"' Tidak Ditemukan"}])},complete:function(){a.events.fire("afterLoad",[a.storeData]),a.events.fire("completeLoad",["satu","dua"])},dataType:n.type});break;case"array":void 0!==n.data.rows&&void 0!==n.data.total_rows?(a.storeData=n.data,a.events.fire("onLoad",[a.storeData,a.params])):a.events.fire("onError",[{status:!1,message:"Data JSON Tidak Ditemukan"}]),a.events.fire("afterLoad",[a.storeData]),a.events.fire("completeLoad",["satu","dua"])}},n.autoLoad&&a.load(),a.searchData=function(t,e,n){for(index=null,i=0;i<t.length;i++)if(t[i][e]==n){index=i;break}return index};var r=function(t){var e=t.replace(/[$,]/g,"").replace(/\./g,"").replace(/,/g,".").replace(/\%/g,"");return!isNaN(e)},s=function(t){var e=new Date(t);return!isNaN(e)};return a.sort=function(i,o){o=o,i=i;a.storeData.rows=a.storeData.rows.sort(function(t,e){var n=t[i],a=e[i];return isNaN(n)||isNaN(a)?s(n)&&s(a)?(n=new Date(n),a=new Date(a)):r(n)&&r(a)&&(n=parseFloat(n.replace(/[$,]/g,"").replace(/\./g,"").replace(/,/g,".").replace(/\%/g,"")),a=parseFloat(a.replace(/[$,]/g,"").replace(/\./g,"").replace(/,/g,".").replace(/\%/g,""))):(n=parseFloat(n),a=parseFloat(a)),"Y"==o?a<n:n<a}),a.events.fire("onLoad",[a.storeData,a.params])},a.getParams=function(){return a.params},a.getData=function(){return a.storeData},a.setData=function(t){n.data=t},a.getSetting=function(){return n},a.cekData=function(t,e,n){return $.trim(a.storeData.rows[t][e])!=$.trim(n)?(rows=$.extend({indexRow:t},a.storeData.rows[t]),null==a.searchData(a.dataChanged,"indexRow",t)&&a.dataChanged.push(rows),a.dataChanged[a.searchData(a.dataChanged,"indexRow",t)][e]=n,a.events.fire("onChange",[{index:t,data:[a.dataChanged[a.searchData(a.dataChanged,"indexRow",t)]]}]),!0):(null!=a.searchData(a.dataChanged,"indexRow",t)&&(a.dataChanged[a.searchData(a.dataChanged,"indexRow",t)][e]=n),!1)},a}function Menu(t){for(var e=$.extend({text:"",direction:"tengah",iconCls:"",disabled:!1,items:[]},t),n=makeid(),a=e.items,i=e.disabled?"disabled":"",o=""!=e.iconCls?'<span class="fa fa-'+e.iconCls+'"></span>':"",r='<a href="#@" id="'+n+'" class="it-btn '+i+'">'+o+" "+e.text+'</a><span class="tooDir" style="display:none"></span><ul data-arah="'+e.direction+'"></ul>',s=$(r),d=0;d<a.length;d++)if(null!==a[d]){var l="<li></li>";l=$(l),"function"==typeof a[d].renderTo?a[d].renderTo(l):"object"==_typeof(a[d])&&(item=createObject(a[d]),item.renderTo(l)),s.eq(2).append(l)}return this.renderTo=function(t){s.appendTo(t),t.click(function(t){var e=$(this),n=e.children("ul"),a=void 0!==n.data("arah")?n.data("arah"):"tengah",i=e.children(".tooDir");n.is(":visible")||($(".it-toolbar div ul").hide(),$(".it-toolbar div a").removeClass("active"),$(".it-toolbar div .tooDir").hide()),0<n.length&&(me_a=n.parent().children("a").outerWidth(),me_b=n.outerWidth(),me_c=i.outerWidth(),"tengah"==a?n.css("left",(me_a-me_b)/2):"kanan"==a&&n.css({left:"auto",right:"5px"}),i.css("left",(me_a-me_c)/2),n.toggle(),i.toggle(),$(this).children("a").toggleClass("active")),t.stopPropagation()}),$(document).click(function(){$(".it-toolbar div ul").hide(),$(".it-toolbar div a").removeClass("active"),$(".it-toolbar div .tooDir").hide()})},this.getSetting=function(){return e},this.getId=function(){return n},this}function ToolBar(t){var e=$.extend({position:"top",items:[]},t),n=makeid(),o=[],r=$('\n\t\t<nav id="'+n+'" class="it-toolbar '+("bottom"==e.position?"bottom":"")+'">\n\t\t\t<ul class="it-toolbar-left left"></ul>\n\t\t\t<ul class="it-toolbar-right right"></ul>\n\t\t</nav>\n\t');return $.each(e.items,function(t,e){var n=void 0!==e.align&&-1<$.inArray(e.align,["left","right"])?e.align:"left",a=$("<li/>"),i=null;"object"===(void 0===e?"undefined":_typeof(e))&&(i=createObject(e))&&(o.push(i.getId()),i.renderTo(a),r.find(".it-toolbar-"+n).append(a))}),this.renderTo=function(t){r.appendTo(t),t},this.getItem=function(t){var e=o[t];return void 0!==e?e:null},this.getSetting=function(){return e},this.getId=function(){return n},this}function Button(t){var e=$.extend({iconCls:"",btnCls:"",css:{},disabled:!1,text:"",id:""},t),n=this;n.events=new Event(n,e);var a=""==e.id?makeid():e.id,i=""!=e.iconCls?'<span class="fa fa-'+e.iconCls+'"></span>':"",o=e.disabled?"disabled":"",r='<a href="javascript:void(0)" id="'+a+'" class="it-btn '+o+" "+e.btnCls+'" >'+i+" "+e.text+"</a>",s=$(r);return s.css(e.css),void 0===e.handler||e.disabled||s.click(function(){var t=e.handler;"function"==typeof t?t.call():"string"==typeof t&&window[t]()}),$.extend(n,n.events.set(s)),n.renderTo=function(t){s.appendTo(t),t},n.getSetting=function(){return e},n.getId=function(){return a},n}function Dialog(t){var e=this,n=$.extend({width:300,height:100,autoHeight:!0,items:[],padding:5,modal:!0,clear:!1,title:"",iconCls:"",autoShow:!0},t),a=makeid(),i=""!=n.iconCls?'<span class="fa fa-'+n.iconCls+'"></span>':"",o=[],r=$('\n\t\t<div class="it-dialog">\n\t\t\t<div class="it-dialog-content">\n\t\t\t\t<div class="it-title">'+i+" "+n.title+'</div> \n\t\t\t\t<div class="it-dialog-inner"></div>\n\t\t\t</div>\n\t\t</div>\n\t');return r.find(".it-dialog-content").width(n.width),r.find(".it-dialog-content").css(n.autoHeight?"min-height":"height",n.height),r.find(".it-dialog-content").css("overflow-y",n.autoHeight?"none":"auto"),r.find(".it-dialog-content").draggable({handle:".it-title",appendTo:"body",start:function(){$(this).css({"-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none",transition:"none"})}}),this.events=new Event(this,n),this.afterShow=function(t){return e.events.add("afterShow",t)},this.onClose=function(t){return e.events.add("onClose",t)},this.onHide=function(t){return e.events.add("onHide",t)},$.each(n.items,function(t,e){var n=null;"function"==typeof e.renderTo?(e.renderTo(r.find(".it-dialog-inner")),o.push(e)):"object"===(void 0===e?"undefined":_typeof(e))&&(n=createObject(e))&&(n.renderTo(r.find(".it-dialog-inner")),o.push(n))}),this.getItem=function(t){return o[t]},this.getSetting=function(){return n},this.getId=function(){return a},this.hide=function(){r.hide(),this.events.fire("onHide",[])},this.show=function(){this.events.fire("afterShow",[])},this.destroy=function(){console.warn("Dialog .destroy() is deprecated, please use .close()"),this.close()},this.close=function(){var t=this;this.hide(),setTimeout(function(){r.remove(),t.events.fire("onClose",[])},600)},$("body").append(r),n.autoShow&&this.show(),this}function Tabs(t){var e=$.extend({items:[],skin:"",css:{},fullscreen:!1},t),r=makeid(),s=$("<div/>",{id:makeid(),css:e.css,class:"it-tab"+e.skin}),d=$("<ul/>",{class:"clearfix"});return d.appendTo(s),$.each(e.items,function(t,e){var n="tab_"+r+"_"+t,a=void 0!==e.tabTitle?e.tabTitle:"Tanpa Judul",i=$("<section/>",{id:n}).hide();(i.appendTo(s),"function"==typeof e.renderTo)?e.renderTo(i):createObject(e).renderTo(i);var o=$("<li>").appendTo(d);$("<a/>",{href:"#"+n,title:a,html:a}).appendTo(o)}),this.renderTo=function(t){var e=s.children("ul").children().children("a"),n=e.first().attr("href");e.removeClass("active"),e.first().addClass("active"),s.find(n).show(),e.click(function(t){e.removeClass("active"),$(n).hide(),(e=$(this)).addClass("active"),n=e.attr("href"),$(n).show(),t.preventDefault()}),t.append(s),t},this.getSetting=function(){return e},this.getId=function(){return r},this}function MessageBox(t){var e=this,n=$.extend({type:"info",title:"Judul",message:"",width:450,height:50,buttons:[]},t),i=this,a=n.buttons,o=$('\n\t\t<div class="it-messagebox">\n\t\t\t<div class="it-messagebox-content">\n\t\t\t\t<div class="it-title">'+n.title+'</div>\n\t\t\t\t<div class="it-messagebox-inner">\n\t\t\t\t\t<div class="message-icon '+n.type+'"></div>\n\t\t\t\t\t'+n.message+'\n\t\t\t\t</div>\n\t\t\t\t<div class="clearfix">\n\t\t\t\t\t<div class="float-right message-buttons"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t');(o.find(".it-messagebox-content").css({width:n.width,"min-height":n.height}).draggable({handle:".it-title",appendTo:"body",start:function(){$(this).css({"-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none",transition:"none"})}}),a.length)?$.each(a,function(t,e){var n=null!=e.btnCls?e.btnCls:"",a=$("<a/>",{href:"javascript:void(0)",html:e.text,class:"it-btn",click:function(){var t=null!=e.handler?e.handler:null;"function"==typeof t?t.call():"string"==typeof t&&window[t](),i.hide()}});a.addClass(n),a.appendTo(o.find(".message-buttons"))}):$("<a/>",{href:"javascript:void(0)",class:"it-btn",html:"OK",click:function(){i.hide()}}).appendTo(o.find(".message-buttons"));return this.show=function(){o.show()},this.hide=function(){o.remove()},this.getSetting=function(){return n},this.getId=function(){return id},o.appendTo("body"),setTimeout(function(){return e.show()},100),this}function ComboBox(t){var e=this,a=$.extend({dataIndex:"",value:"",emptyText:"",autoLoad:!0,allowBlank:!0,disabled:!1,readonly:!1,width:"",dataSource:{type:"array",url:"",data:[]}},t),i=(a.dataIndex?a.dataIndex:makeid(),$("<select/>",{class:"it-form-control",name:a.dataIndex,id:a.dataIndex}));return a.width&&i.width(a.width),a.readOnly&&i.prop("readonly",a.readOnly),a.disabled&&i.prop("disabled",a.disabled),a.allowBlank||i.prop("required",!0),i.blur(function(t){var e=t.target.checkValidity();i[e?"removeClass":"addClass"]("invalid")}),this.events=new Event(this,a),this.events.add("hide",function(){return i.hide()}),this.events.add("show",function(){return i.show()}),this.events.set(i),this.onLoad=function(t){return e.events.add("onLoad",t)},this.getId=function(){return a.dataIndex},this.getDom=function(){return i},this.getSelected=function(){return i.find("option:selected")},this.val=function(t){if(void 0===t)return i.find("option:selected").val();i.find("option").filter('[value="'+t+'"]').prop("selected",!0)},this.getDataSource=function(){var n=this;switch(i.empty(),a.emptyText&&i.append($("<option/>",{val:"",text:a.emptyText})),a.dataSource.type){case"array":var t=void 0!==a.dataSource.data?a.dataSource.data:null;t&&$.each(t,function(t,e){var n=void 0!==e.data?e.data:null;i.append($("<option/>",{val:e.key,html:e.value,selected:e.key==a.value,data:n}))}),this.events.fire("onLoad",[i,t]);break;case"ajax":$.ajax({url:a.dataSource.url,type:a.dataSource.method||"get",data:a.dataSource.params||{},dataType:"json",success:function(t){var e=void 0!==t.rows?t.rows:null;e&&e.length&&$.each(e,function(t,e){var n=void 0!==e.data?e.data:null;i.append($("<option/>",{val:e.key,html:e.value,selected:e.key==a.value,data:n}))}),n.events.fire("onLoad",[i,e])}});break;default:throw"type only available for ajax and array"}},this.getSettings=function(){return a},this.setEnabled=function(t){select.prop("disabled",!t)},this.setDataSource=function(t){a.dataSource=t,me.getDataSource()},this.renderTo=function(t){i.appendTo(t),t},a.autoLoad&&this.getDataSource(),this}function HTML(t){var e=$.extend({content:"",url:"",id:"",class:"",css:{}},t),n=this,a=""==e.id?makeid():e.id,i=$("<div/>",{id:a,css:e.css,class:e.class});empty(e.url)?"string"==typeof e.content?i.html(e.content):("object"===_typeof(e.content)?e.content:$(e.content)).appendTo(i):i.load(e.url);return n.setContent=function(t){i.html(t)},n.renderTo=function(t){i.appendTo(t),t},n.getSetting=function(){return e},n.getId=function(){return a},n}function Form(t){var r=$.extend({method:"POST",id:"Fm",url:"",width:"100%",css:{},fieldDefaults:{labelWidth:100,fieldBlock:!1},items:[]},t),s={},d=$("<form/>",{method:r.method,action:r.url,name:r.id,id:r.id,enctype:"multipart/form-data",css:r.css});d.on("keyup keypress",function(t){if(13===(t.keyCode||t.which))return t.preventDefault(),!1});$("<input/>",{type:"submit",css:{display:"none"}}).appendTo(d);if(0<r.items.length){var l=$("<table/>",{class:"it-table-form",width:r.width});$.each(r.items,function(t,e){var n="";void 0!==e.fieldLabel&&e.fieldLabel&&(n=r.fieldDefaults.fieldBlock?"<label>"+e.fieldLabel+"</label>":'<td width="'+r.fieldDefaults.labelWidth+'"><label>'+e.fieldLabel+"</label></td>");var a=$("\n\t\t\t\t<tr>\n\t\t\t\t\t"+n+'\n\t\t\t\t\t<td><div class="form-field"></div></td>\n\t\t\t\t</tr>\n\t\t\t');r.fieldDefaults.fieldBlock&&(a=$("\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t"+n+'\n\t\t\t\t\t\t\t<div class="form-field"></div>\n\t\t\t\t\t\t</td>\t\n\t\t\t\t\t</tr>\n\t\t\t\t'));var i=void 0!==e.type&&"hidden"==e.type?d:a.find(".form-field");if("function"==typeof e.renderTo)e.renderTo(i),s[e.getId()]=e;else if("object"===(void 0===e?"undefined":_typeof(e))){var o=createObject(e);if(o.renderTo(i),s[o.getId()]=o,"hidden"==e.type)return!0}a.appendTo(l)}),l.appendTo(d)}return this.setData=function(t){d.autofill(t)},this.getItem=function(t){return s[t]},this.serializeJSON=function(){return d.serializeJSON()},this.serialize=function(){return d.serialize()},this.validate=function(){var e=!1;return d.removeAttr("novalidate"),d.find(".it-form-control").blur(),d.find(":submit").click(function(t){(e=d[0].checkValidity())&&t.preventDefault()}),d.find(":submit").click(),e},this.renderTo=function(t){d.appendTo(t),t},this.reset=function(){d[0].reset(),d.find('input[type="hidden"]').val("")},this.getSetting=function(){return r},this.getId=function(){return id},this}function TextBox(t){var e=$.extend({dataIndex:"textfield",type:"text",maxlength:null,minlength:null,format:"",disabled:!1,readOnly:!1,allowBlank:!0,defaultValue:"",placeholder:"",css:{}},t);this.events=new Event(this,e);var n=null;return"textarea"==e.type?n=$("<textarea/>"):(n=$("<input/>",{type:-1<$.inArray(e.type,["text","password","date","email","hidden"])?e.type:"text"}),e.minlength&&n.attr("minlength",e.minlength),e.maxlength&&n.attr("maxlength",e.maxlength),"numeric"==e.type&&n.keypress(function(t){if(8!=t.which&&0!=t.which&&(t.which<48||57<t.which))return!1})),n.attr({name:e.dataIndex,id:e.dataIndex,class:"it-form-control"}),e.placeholder&&n.attr("placeholder",e.placeholder),e.defaultValue&&n.val(e.defaultValue),e.disabled&&n.prop("disabled",e.disabled),e.readOnly&&n.prop("readonly",e.readOnly),e.allowBlank||n.prop("required",!0),$.isEmptyObject(e.css)||n.css(e.css),n.blur(function(t){var e=t.target.checkValidity();n[e?"removeClass":"addClass"]("invalid")}),content=n,$.extend(this,this.events.set(content)),this.val=function(t){if(null==(void 0===t?"undefined":_typeof(t)))return content.val()||"";content.val(t)},this.renderTo=function(t){content.appendTo(t),t},this.getSetting=function(){return e},this.getId=function(){return e.dataIndex},this.setDisabled=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];n.prop("disabled",t)},this.setReadOnly=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];n.prop("disabled",t)},this}function CheckBox(t){var e=$.extend({dataIndex:"textfield",text:"",disabled:!1,newLine:!1,value:"1"},t);disabled=0<e.disabled?" disabled ":"";var n='<input type="checkbox" class="it-checkbox" name="'+e.dataIndex+'" id="'+e.dataIndex+'" value="'+e.value+'" '+maxlength+minlength+disabled+'><label class="it-label" for="'+e.dataIndex+'">'+e.text+"</label>"+(e.newLine?"<BR>":""),a=$(n);return this.renderTo=function(t){a.appendTo(t),t},this.getSetting=function(){return e},this.getId=function(){return e.dataIndex},this}function FlexBox(t){var e=$.extend({id:"",title:"",iconTitle:"",direction:"row",wrap:"",justifyContent:"",css:{},alignItems:"",alignContent:"",items:[]},t),a=this,n=makeid();e.items;if(a.content=$("<div />",{id:n,class:"it-flex"}),a.content.css(e.css),a.content.addClass("it-flex-dir dir-"+e.direction),a.content.addClass("it-flex-wrap wrap-"+e.wrap),a.content.addClass("it-flex-jc jc-"+e.justifyContent),a.content.addClass("it-flex-ai ai-"+e.alignItems),a.content.addClass("it-flex-ac ac-"+e.alignContent),e.title){var i=$("<div/>",{class:"it-title",html:e.title});i.prepend($("<span/>",{class:"fa"+(e.iconTitle?" fa-"+e.iconTitle:"")})),a.content.append(i)}return $.each(e.items,function(t,e){var n=null;"function"==typeof e.renderTo?e.renderTo(a.content):"object"===(void 0===e?"undefined":_typeof(e))&&(n=createObject(e))&&n.renderTo(a.content)}),a.renderTo=function(t){this.content.appendTo(t),t},a.getSetting=function(){return e},a.getId=function(){return n},a}function Panel(t){console.warn("Panel is depecated. For the future use FlexBox.");var e=$.extend({iconCls:"",title:"",items:[]},t);return new FlexBox({title:e.title,iconTitle:e.iconCls,direction:"column",items:e.items})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};String.prototype.format=function(){return tmp=arguments,this.replace(/\{(\d+)\}/g,function(t,e){return tmp[e]})},Array.prototype.remove=function(e,n){var t=$.grep(this,function(t){return t[e]!==n});return this.length=0,this.push.apply(this,t),this},Array.prototype.insert=function(t,e){this.splice(t,0,e)};